
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.2, mkdocs-material-1.7.5">
    
    
      
        <title>Código fuente - Geoladris</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-769c285a91.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="Geoladris" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Desarrollador
                </span>
              
            
            Código fuente
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Geoladris
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Usuario
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Usuario
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/quickstart/" title="Guía rápida" class="md-nav__link">
      Guía rápida
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/config/" title="Configuración de aplicaciones" class="md-nav__link">
      Configuración de aplicaciones
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/create/" title="Creación de aplicaciones" class="md-nav__link">
      Creación de aplicaciones
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/download/" title="Descargas" class="md-nav__link">
      Descargas
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Desarrollador
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Desarrollador
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../quickstart/" title="Guía rápida" class="md-nav__link">
      Guía rápida
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Código fuente
      </label>
    
    <a href="./" title="Código fuente" class="md-nav__link md-nav__link--active">
      Código fuente
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tecnologias" title="Tecnologías" class="md-nav__link">
    Tecnologías
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#patron-de-diseno-message-bus" title="Patrón de diseño message-bus" class="md-nav__link">
    Patrón de diseño message-bus
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git" title="Git" class="md-nav__link">
    Git
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repositorios" title="Repositorios" class="md-nav__link">
    Repositorios
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modelo-de-ramas" title="Modelo de ramas" class="md-nav__link">
    Modelo de ramas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aplicando-cambios" title="Aplicando cambios" class="md-nav__link">
    Aplicando cambios
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integracion-continua" title="Integración continua" class="md-nav__link">
    Integración continua
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests-de-integracion" title="Tests de integración" class="md-nav__link">
    Tests de integración
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#depurando-javascript-en-el-navegador" title="Depurando JavaScript en el navegador" class="md-nav__link">
    Depurando JavaScript en el navegador
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../environment/" title="Entorno de desarrollo" class="md-nav__link">
      Entorno de desarrollo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../apps/" title="Aplicaciones" class="md-nav__link">
      Aplicaciones
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migrate/" title="Migración" class="md-nav__link">
      Migración
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/" title="Publicación" class="md-nav__link">
      Publicación
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../contribute/" title="Contribuir" class="md-nav__link">
      Contribuir
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Referencia
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Referencia
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ref/changelog/" title="Registro de cambios" class="md-nav__link">
      Registro de cambios
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ref/plugins/" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ref/events/" title="Eventos" class="md-nav__link">
      Eventos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ref/license/" title="Licencia" class="md-nav__link">
      Licencia
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tecnologias" title="Tecnologías" class="md-nav__link">
    Tecnologías
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#patron-de-diseno-message-bus" title="Patrón de diseño message-bus" class="md-nav__link">
    Patrón de diseño message-bus
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git" title="Git" class="md-nav__link">
    Git
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repositorios" title="Repositorios" class="md-nav__link">
    Repositorios
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modelo-de-ramas" title="Modelo de ramas" class="md-nav__link">
    Modelo de ramas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aplicando-cambios" title="Aplicando cambios" class="md-nav__link">
    Aplicando cambios
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integracion-continua" title="Integración continua" class="md-nav__link">
    Integración continua
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests-de-integracion" title="Tests de integración" class="md-nav__link">
    Tests de integración
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#depurando-javascript-en-el-navegador" title="Depurando JavaScript en el navegador" class="md-nav__link">
    Depurando JavaScript en el navegador
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Código fuente</h1>
                
                <h2 id="tecnologias">Tecnologías</h2>
<p>En Geoladris utilizamos <a href="https://maven.apache.org/">Maven</a> para construir nuestros proyectos, tanto el <em>core</em> como los plugins. Incluso los plugins que únicamente tienen parte cliente (plugins <a href="../plugins/#cliente">cliente</a> con CSS y JavaScript) se gestionan a través de Maven para poder tratarlos conjuntamente; para ello utilizamos el plugin <a href="https://github.com/eirslett/frontend-maven-plugin">frontend-maven-plugin</a>.</p>
<p>Tanto el core como los plugins con parte servidora utilizan la <a href="https://javaee.github.io/servlet-spec/downloads/servlet-3.1/Final/servlet-3_1-final.pdf">API Servlet 3.1</a>. Utilizan ficheros <code>web-fragment.xml</code> para definir sus servlets, filters y application listeners.</p>
<p>En cuanto a los plugins cliente, todos tienen un fichero <code>package.json</code> con sus dependencias. Las dependencias JavaScript las manejamos con <code>yarn</code>. Como se explica arriba, <code>Maven</code> se encarga de hacer las llamadas correspondientes a <code>yarn</code> mediante el <code>frontend-maven-plugin</code>.</p>
<p>Por último, el código JavaScript se organiza en módulos de <a href="http://requirejs.org/">RequireJS</a>.</p>
<h3 id="patron-de-diseno-message-bus">Patrón de diseño <code>message-bus</code></h3>
<p>En Geoladris hacemos un uso extensivo del patrón de diseño <code>message-bus</code>.</p>
<p>El patrón de diseño <code>message-bus</code> permite desacoplar los componentes que forman una aplicación. En una aplicación modular, los distintos componentes necesitan interactuar entre sí. Si el acoplamiento es directo, la aplicación deja de ser modular ya que aparecen dependencias, con frecuencia recíprocas, entre los distintos módulos y no es posible realizar cambios a un módulo sin que otros se vean afectados.</p>
<p>En cambio, si los objetos se acoplan a través de un objeto intermediario (<code>message-bus</code>), casi todas las dependencias desaparecen, dejando sólo aquellas que hay entre el <code>message-bus</code> y los distintos módulos.</p>
<p>Para visualizar el patrón, propondremos un ejemplo, una aplicación modular que consta de tres componentes con representación gráfica y que están dispuestos de la siguiente manera:</p>
<ul>
<li>Map: En la parte central habrá un mapa.</li>
<li>LayerList: En la parte izquierda habrá una lista de capas.</li>
<li>NewLayer: En la parte superior existirá un control que permite añadir capas a los otros dos componentes.</li>
</ul>
<p>Un posible diseño de dicha página consistiría en un módulo <code>layout</code> que maqueta la página HTML y que inicializa los otros tres objetos. En respuesta a la acción del usuario, el objeto <code>NewLayer</code> mandaría un mensaje a <code>LayerList</code> y <code>Map</code> para añadir el tema en ambos componentes. De la misma manera, <code>LayerList</code> podría mandar un mensaje a <code>Map</code> en caso de que se permitiera la eliminación de capas desde aquél. El siguiente grafo muestra los mensajes que se pasarían los distintos objetos:</p>
<p><img alt="" src="../../_images/eventbus/eventbus.png" /></p>
<p>Es posible observar como en el caso de que se quisiera quitar el módulo <code>LayerList</code>, sería necesario modificar el objeto Layout así como el objeto <code>NewLayer</code>, ya que están directamente acoplados. Sin embargo, con el uso del <code>message-bus</code>, sería posible hacer que los distintos objetos no se referenciaran entre sí directamente sino a través del <code>message-bus</code>:</p>
<p><img alt="" src="../../_images/eventbus/eventbus2.png" /></p>
<p>Así, el módulo <code>NewLayer</code> mandaría un mensaje al <code>message-bus</code> con los datos de la nueva capa y <code>Map</code> y <code>LayerList</code> símplemente escucharían el mensaje y reaccionarían convenientemente. Sería trivial quitar de la página <code>LayerList</code> ya que no hay ninguna referencia directa al mismo (salvo tal vez en <code>Layout</code>).</p>
<p>Y al contrario: sería posible incluir un nuevo módulo, por ejemplo un mapa adicional, y que ambos escuchasen el evento <code>add-layer</code> de forma que se añadirían los temas a ambos mapas.</p>
<p>De esta manera la aplicación es totalmente modular: es posible reemplazar módulos sin que los otros módulos se vean afectados, se pueden realizar contribuciones bien definidas que sólo deben entender los mensajes existentes para poder integrarse en la aplicación, etc.</p>
<h2 id="git">Git</h2>
<h3 id="repositorios">Repositorios</h3>
<p>A continuación se detalla la estructura del proyecto.</p>
<p>Si uno revisa el repositorio de código de <a href="https://github.com/geoladris">Geoladris</a> encontrará 4 repositorios:</p>
<ul>
<li><a href="https://github.com/geoladris/doc">doc</a>, el repositorio donde se encuentra la documentación oficial del proyecto</li>
<li><a href="https://github.com/geoladris/core">core</a>. Proyecto Maven. Se encarga de empaquetar todos los plugins (en tiempo de compilación) y luego servir sus recursos (en tiempo de ejecución).</li>
<li><a href="https://github.com/geoladris/plugins">plugins</a>: Conjunto de plugins con funcionalidad aislada que pueden ser o no incluidos en las aplicaciones de manera independiente (ver <a href="../plugins/">plugins</a>).</li>
<li><a href="https://github.com/geoladris/apps">apps</a>: Aplicaciones que definen qué plugins utilizan y cómo se configuran.</li>
</ul>
<h3 id="modelo-de-ramas">Modelo de ramas</h3>
<p>En Geoladris gastamos un modelo de ramas muy parecido al de <a href="http://docs.geoserver.org/stable/en/developer/source.html#repository-structure">GeoServer</a> y al modelo <a href="https://barro.github.io/2016/02/a-succesful-git-branching-model-considered-harmful/">cactus</a>.</p>
<p>Existen las siguientes ramas:</p>
<ul>
<li><strong><code>master</code></strong>: Rama principal sobre la que se realizan los últimos desarrollos.</li>
<li>
<p><strong>Ramas de <em>release</em></strong>: Ramas de desarrollo de una versión determinada. Tienen como nombre <code>&lt;major&gt;.&lt;minor&gt;.x</code> (<a href="http://semver.org">versionado semántico</a>). Por ejemplo: <code>6.0.x</code>.</p>
<p>Estas ramas nacen siempre de <code>master</code> y nunca se vuelven a mezclar en <code>master</code>. Si se quieren incluir los cambios en diferentes ramas, se utiliza <a href="https://git-scm.com/docs/git-cherry-pick">git cherry-pick</a> (igual que <a href="http://docs.geoserver.org/stable/en/developer/source.html#porting-changes-between-primary-branches">GeoServer</a>).</p>
</li>
<li>
<p><strong>Ramas de <em>feature</em></strong>: Ramas para desarrollos específicos. Pueden salir tanto de <code>master</code> como de una rama de <em>release</em> y siempre se mezclan sobre la rama de la que salieron.</p>
<p>Se recomienda no mantener estas ramas durante mucho tiempo para evitar dificultades al mezclar.</p>
</li>
</ul>
<h3 id="aplicando-cambios">Aplicando cambios</h3>
<p>Siguiente el <a href="http://semver.org">versionado semántico</a> podemos encontrarnos con tres tipos de cambios:</p>
<p><strong>Parches</strong> (aumentan el patch number): Se pueden aplicar en cualquier rama.</p>
<p><strong>Cambios menores</strong> (aumentan el minor number): Se pueden aplicar únicamente en <code>master</code> o en las ramas de release (p. ej. <code>7.1.x</code>) siempre y cuando todavía no se haya publicado la primera versión de esa rama de release (p. ej. <code>7.1.0</code>).</p>
<p><strong>Cambios mayores</strong> (aumentan el major number): Únicamente aplicables en <code>master</code>. Además, en este caso es necesario dejar lista la rama de release de la versión menor que hasta ese momento estaba en <code>master</code>.</p>
<p>Por ejemplo, si en <code>master</code> estaba la versión <code>7.2.0-SNAPSHOT</code> y aplicamos un cambio que actualiza la versión a <code>8.0.0-SNAPSHOT</code>, deberemos crear la rama de release antes de aplicar ese cambio:</p>
<div class="codehilite"><pre><span></span>git checkout master
git checkout -b <span class="m">7</span>.2.x
git push -u origin <span class="m">7</span>.2.x
</pre></div>


<p><strong>IMPORTANTE</strong>: Para aplicar cambios en varias ramas, nunca mezclamos entre ellas; utilizamos <a href="https://git-scm.com/docs/git-cherry-pick">git cherry-pick</a> (igual que <a href="http://docs.geoserver.org/stable/en/developer/source.html#porting-changes-between-primary-branches">GeoServer</a>).</p>
<p><strong>IMPORTANTE</strong>: Cada vez que introducimos un cambio (en cualquiera de las ramas), actualizamos el changelog.</p>
<p><strong>IMPORTANTE</strong>: Los números de versión en los ficheros <code>pom.xml</code> y <code>package.json</code> únicamente se cambian durante el proceso de <a href="../releases/">publicación</a> o en el caso de introducir cambios mayores.</p>
<h2 id="integracion-continua">Integración continua</h2>
<p>Geoladris está configurado en <a href="https://travis-ci.org/geoladris/">Travis</a> para su integración continua.</p>
<p>La configuración debe garantizar que se pasan todos los tests y que se hace un <code>mvn deploy</code> de todos los artefactos que componen Geoladris.</p>
<p>El deploy de Maven requiere autenticación. Para proporcionarla hay un fichero <code>deploy-settings.xml</code> en la raíz del repositorio que utiliza variables de entorno para las credenciales:</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;settings</span>
        <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;</span>
        <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
        <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;servers&gt;</span>
        <span class="nt">&lt;server&gt;</span>
            <span class="nt">&lt;id&gt;</span>geoladris-releases<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;username&gt;</span>${env.GEOLADRIS_DEPLOY_USER}<span class="nt">&lt;/username&gt;</span>
            <span class="nt">&lt;password&gt;</span>${env.GEOLADRIS_DEPLOY_PASS}<span class="nt">&lt;/password&gt;</span>
        <span class="nt">&lt;/server&gt;</span>
        <span class="nt">&lt;server&gt;</span>
            <span class="nt">&lt;id&gt;</span>geoladris-snapshots<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;username&gt;</span>${env.GEOLADRIS_DEPLOY_USER}<span class="nt">&lt;/username&gt;</span>
            <span class="nt">&lt;password&gt;</span>${env.GEOLADRIS_DEPLOY_PASS}<span class="nt">&lt;/password&gt;</span>
        <span class="nt">&lt;/server&gt;</span>
    <span class="nt">&lt;/servers&gt;</span>
<span class="nt">&lt;/settings&gt;</span>
</pre></div>


<p>Basta con configurar Maven en el fichero <code>.travis.yml</code> para que utilice este fichero:</p>
<div class="codehilite"><pre><span></span>after_success:
  - mvn deploy -s deploy-settings.xml
</pre></div>


<p>Por último, hay que configurar las variables de entorno en la interfaz web de Travis.</p>
<h2 id="tests-de-integracion">Tests de integración</h2>
<p>Para ejecutar los tests de integración es necesario utilizar de manera explícita el profile de Maven <code>integration-tests</code>:</p>
<div class="codehilite"><pre><span></span>mvn verify -Pintegration-tests
</pre></div>


<p>Además, para que los tests de integración puedan pasar correctamente es necesario:</p>
<ul>
<li>Establecer la variable de entorno <code>GEOLADRIS_EMAIL_PASSWORD</code>. La contraseña es privada y sólo la conocen los principales desarrolladores de Geoladris.</li>
<li>Configurar una base de datos PostGIS en local con puerto 5432 y credenciales <code>docker:docker</code>. Para ello se puede utilizar el siguiente comando:</li>
</ul>
<div class="codehilite"><pre><span></span>docker run -d -p 5432:5432 --name=postgis kartoza/postgis
</pre></div>


<h2 id="depurando-javascript-en-el-navegador">Depurando JavaScript en el navegador</h2>
<p>Por defecto, se utilizan recursos minificados en el cliente. Los recursos minificados forman parte del <a href="../apps/">empaquetado</a>.</p>
<p>También es posible utilizar recursos <em>no</em> minificados añadiendo el parámetro <code>debug=true</code> a la petición HTML. Por ejemplo: <a href="http://localhost:8080/demo/?debug=true">http://localhost:8080/demo/?debug=true</a>.</p>
<p>Cuando se depura JavaScript es importante conocer la secuencia de inicio de la aplicación:</p>
<ol>
<li>Se carga <code>require.js</code>.</li>
<li><code>require.js</code> carga el módulo <code>main</code>.</li>
<li><code>main</code> carga el módulo <code>customization</code>.</li>
<li><code>customization</code> carga dinámicamente los módulos especificados en su configuración (<code>config.js</code>).</li>
<li>Cuando todos los módulos se han cargado se lanza el evento <code>modules-loaded</code>.</li>
<li>Cuando todas las capas se han añadido al mapa se lanza el evento <code>layers-loaded</code>.</li>
</ol>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../quickstart/" title="Guía rápida" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Guía rápida
              </span>
            </div>
          </a>
        
        
          <a href="../environment/" title="Entorno de desarrollo" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Entorno de desarrollo
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-07b0fbb49b.js"></script>
      
      
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>